Для начала работы необходимо зарегистрироваться на сайте mistral.ai, так как агент работает именно через него.

Также в настройках аккаунта google api, нужно создать сервисный аккаунт и открыть доступ к google sheets и google drive, чтобы программа могла получить доступ к вашей таблице.

Данные от сервисного аккаунта необходимо положить в рут директорию проекта и указать в .env все нужные данные.

После запуска у бота будет доступна запись трат и команда /expenses, которая выводит данные по тратам прямиком из таблицы.

15.12:
добавили observability - логирование в logs, метрики, трассировки через langfuse.

Для трассировок выбрали langfuse из-за его простой конфигурации и использования - декоратор @observe делает практически всё сам.
Метрики также логируются в файл.

Основные метрики для модели

    Общий расход токенов на I/O: стоимость промпта и ответа в токенах.
    Доля ошибок среди запросов: какая часть запросов заканчивается ошибкой.
    Field Accuracy: точность ключевых полей (Сумма, Тип, Описание, Дата).
    Hallucination Rate: доля выдуманных деталей.
    Tool Success: успешность вызовов инструментов (создание событий).
    Latency/Cost: скорость и ресурсозатраты.
